<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Profile - GeForce APIs</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta property="og:title" content="REST API FREE">
  <meta property="og:description" content="FEITA POR: @clovermods">
  <link rel="apple-touch-icon" sizes="180x180" href="https://telegra.ph/file/e28fabcd7e856b4bcef0a.jpg">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v6.0.0-beta1/css/all.css" type="text/css" media="all" />
  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  
  <link rel="stylesheet" type="text/css" href="https://ferdiz-afk.github.io/deskapp/vendors/styles/core.css">
  <link rel="stylesheet" type="text/css" href="https://ferdiz-afk.github.io/deskapp/vendors/styles/icon-font.min.css">
  <link rel="stylesheet" type="text/css" href="https://ferdiz-afk.github.io/deskapp/vendors/styles/style.css">
  <style>
    body {
      background: #28223F url('<%= user.wallpaper %>') no-repeat center center fixed;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      background-size: cover;
      font-family: 'Inter', sans-serif;
      color: #B3B8CD;
    }
    .header, .left-side-bar { /* Assuming these might be part of a layout not shown */
        display: none; /* Hide if this is a standalone profile page view */
    }
    .main-container { padding-top: 20px; }
    .page-header h4 { color: #FEBB0B; }
    .breadcrumb-item a { color: #03BFCB; }
    .breadcrumb-item.active { color: #8c90a1; }

    .card-box {
        background-color: #231E39;
        color: #B3B8CD;
        border: 1px solid #2d2747;
    }
    .profile-photo .edit-avatar {
        background: rgba(3, 191, 203, 0.7); /* #03BFCB with transparency */
    }
    .profile-photo .edit-avatar i { color: #231E39; }
    .profile-info h5, .profile-social h5, .profile-skills h5 { color: #FEBB0B; }
    .profile-info ul li span { color: #8c90a1; }
    .profile-info ul li { margin-bottom: 8px; }
    .profile-social .btn {
        transition: transform 0.2s ease;
    }
    .profile-social .btn:hover {
        transform: scale(1.1);
    }
    .nav-tabs.customtab .nav-link {
        color: #B3B8CD;
    }
    .nav-tabs.customtab .nav-link.active,
    .nav-tabs.customtab .nav-link:hover {
        color: #FEBB0B;
        border-bottom: 2px solid #FEBB0B;
        background-color: #1F1A36;
    }
    .form-control {
        background-color: #1F1A36;
        color: #B3B8CD;
        border: 1px solid #2d2747;
    }
    .form-control:focus {
        background-color: #1F1A36;
        color: #B3B8CD;
        border-color: #03BFCB;
        box-shadow: 0 0 0 0.2rem rgba(3, 191, 203, 0.25);
    }
    .btn-primary {
        background-color: #03BFCB;
        border-color: #03BFCB;
        color: #231E39;
        font-weight: bold;
    }
    .btn-primary:hover {
        background-color: #FEBB0B;
        border-color: #FEBB0B;
    }
    .badge-success { background-color: #28a745; }
    .badge-info { background-color: #17a2b8; }
    .badge-warning { background-color: #ffc107; color: #212529;}

    #apiKey {
        background-color: #1F1A36;
        padding: 5px;
        border-radius: 3px;
        color: #03BFCB;
        margin-right: 5px;
    }
    .btn-copy {
        background-color: transparent;
        border: 1px solid #03BFCB;
        color: #03BFCB;
        padding: 2px 6px;
        font-size: 0.8rem;
    }
    .btn-copy:hover {
        background-color: #03BFCB;
        color: #1F1A36;
    }
  </style>
</head>
<body>
  <div class="main-container">
    <div class="pd-ltr-20 xs-pd-20-10">
      <div class="min-height-200px">
        <div class="page-header">
          <div class="row">
            <div class="col-md-12 col-sm-12">
              <div class="title">
                <h4><i class="fas fa-user-cog mr-2"></i>Profile Settings</h4>
              </div>
              <nav aria-label="breadcrumb" role="navigation">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="/"><i class="fas fa-home"></i> Home</a></li>
                  <li class="breadcrumb-item active" aria-current="page">Profile</li>
                </ol>
              </nav>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-30">
            <div class="pd-20 card-box height-100-p">
              <div class="profile-photo">
                <a data-toggle="modal" data-target="#modal" class="edit-avatar"><i class="fas fa-search-plus"></i></a>
                <img src="<%= user.ft %>" alt="User Avatar" class="avatar-photo" />
                <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content" style="background-color: #231E39;">
                      <div class="modal-body pd-5">
                        <div class="img-container">
                          <img id="image" src="<%= user.ft %>" alt="Picture" style="max-width: 100%;"/>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <h5 class="text-center h5 mb-0 mt-3"><%= user.username %></h5>
              <p class="text-center text-muted font-14">
                <%= user.isPremium ? 'Premium User' : 'Standard User' %>
              </p>
              <div class="profile-info mt-3">
                <h5 class="mb-20 h5 text-blue"><i class="fas fa-info-circle mr-2"></i>Information</h5>
                <ul>
                  <li><span><i class="fas fa-layer-group mr-2 text-warning"></i>Level:</span> <%= user.total %></li>
                   <li>
                     <span><i class="fas fa-user-tag mr-2 text-warning"></i>Status:</span> 
                     <% if (user.isPremium) { %>
                       <span class="badge badge-warning"><i class="fas fa-crown mr-1"></i>Premium Member</span>
                     <% } else { %>
                       <span class="badge badge-info">Free User</span> <a href="/pricing" class="btn btn-xs btn-outline-warning ml-2 py-0 px-1" style="font-size: 0.7rem;"><i class="fas fa-arrow-up"></i> Upgrade</a>
                     <% } %>
                   </li>
                   <li>
                        <span><i class="fas fa-key mr-2 text-warning"></i>API Key:</span> 
                        <code id="apiKeyDisplay"><%= user.key %></code> 
                        <button class="btn-copy" onclick="copyApiKey()"><i class="far fa-copy"></i> Copy</button>
                   </li>
                   <li>
                       <span><i class="fas fa-tachometer-alt mr-2 text-warning"></i>API Usage:</span> 
                        <% if (user.isPremium) { %> 
                            Unlimited 
                        <% } else { %> 
                            <%= user.usageCount || 0 %> / <%= user.dailyLimit || 50 %> 
                        <% } %>
                   </li>
                </ul>
              </div>
              <div class="profile-social mt-3">
                <h5 class="mb-20 h5 text-blue"><i class="fas fa-link mr-2"></i>Social Links</h5>
                <ul class="clearfix">
                  <% if (user.insta) { %><li><a href="<%= user.insta %>" target="_blank" class="btn" data-bgcolor="#E1306C" data-color="#ffffff"><i class="fab fa-instagram"></i></a></li><% } %>
                  <% if (user.yt) { %><li><a href="<%= user.yt %>" target="_blank" class="btn" data-bgcolor="#FF0000" data-color="#ffffff"><i class="fab fa-youtube"></i></a></li><% } %>
                  <% if (user.zap) { %><li><a href="https://wa.me/<%= user.zap %>" target="_blank" class="btn" data-bgcolor="#25D366" data-color="#ffffff"><i class="fab fa-whatsapp"></i></a></li><% } %>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-xl-8 col-lg-8 col-md-8 col-sm-12 mb-30">
            <div class="card-box height-100-p overflow-hidden">
              <div class="profile-tab height-100-p">
                <div class="tab height-100-p">
                  <ul class="nav nav-tabs customtab" role="tablist">
                    <li class="nav-item">
                      <a class="nav-link active" data-toggle="tab" href="#setting" role="tab"><i class="fas fa-user-edit mr-2"></i>Edit Profile</a>
                    </li>
                  </ul>
                  <div class="tab-content">
                    <div class="tab-pane fade show active height-100-p" id="setting" role="tabpanel">
                      <div class="profile-setting">
                        <form action="/editarr/<%= user.username %>" method="post">
                          <ul class="profile-edit-list row">
                            <li class="weight-500 col-md-12 mb-3"> 
                                <h4 class="text-blue h5 mb-20"><i class="fas fa-pencil-alt mr-2"></i>Update Your Details</h4>
                            </li>
                            <li class="col-md-6">
                              <div class="form-group">
                                <label><i class="fas fa-image mr-1"></i> Foto URL:</label>
                                <input class="form-control form-control-lg" id="ft" name="ft" value="<%= user.ft %>" type="text" placeholder="Paste your image link here" />
                              </div>
                              <div class="form-group">
                                <label><i class="fas fa-lock mr-1"></i> New Password (optional):</label>
                                <input class="form-control form-control-lg" id="password" name="password" type="password" placeholder="Enter new password" />
                              </div>
                            </li>
                            <li class="col-md-6">
                              <div class="form-group">
                                <label><i class="fab fa-whatsapp mr-1"></i> WhatsApp Number:</label>
                                <input class="form-control form-control-lg" id="zap" name="zap" value="<%= user.zap %>" type="text" placeholder="e.g., 628123456789" />
                              </div>
                              <div class="form-group">
                                <label><i class="fab fa-youtube mr-1"></i> YouTube URL:</label>
                                <input class="form-control form-control-lg" id="yt" name="yt" value="<%= user.yt %>" type="text" placeholder="Your YouTube channel link" />
                              </div>
                              <div class="form-group">
                                <label><i class="fab fa-instagram mr-1"></i> Instagram URL:</label>
                                <input class="form-control form-control-lg" id="insta" name="insta" value="<%= user.insta %>" type="text" placeholder="Your Instagram profile link" />
                              </div>
                            </li>
                            <li class="col-md-12 text-right">
                                <div class="form-group mb-0">
                                  <button type="submit" class="btn btn-primary"><i class="fas fa-save mr-2"></i>Save & Update</button>
                                </div>
                            </li>
                          </ul>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://ferdiz-afk.github.io/deskapp/vendors/scripts/core.js"></script>
  <script src="https://ferdiz-afk.github.io/deskapp/vendors/scripts/script.min.js"></script>
  <script src="https://ferdiz-afk.github.io/deskapp/vendors/scripts/process.js"></script>
  <script src="https://ferdiz-afk.github.io/deskapp/vendors/scripts/layout-settings.js"></script>
  <script>
    function copyApiKey() {
        const apiKey = document.getElementById('apiKeyDisplay').innerText;
        navigator.clipboard.writeText(apiKey).then(() => {
            alert('API Key copied to clipboard!');
        }).catch(err => {
            alert('Failed to copy API Key.');
            console.error('Error copying API Key: ', err);
        });
    }

    // CropperJS related script from original file - kept for functionality
    window.addEventListener("DOMContentLoaded", function () {
      var image = document.getElementById("image");
      var cropBoxData;
      var canvasData;
      var cropper;

      $("#modal")
        .on("shown.bs.modal", function () {
          if (!image) return; // Guard against null image
          cropper = new Cropper(image, {
            autoCropArea: 0.5,
            dragMode: "move",
            aspectRatio: 1, // Changed to 1 for square avatar
            restore: false,
            guides: false,
            center: false,
            highlight: false,
            cropBoxMovable: true, // Allow moving crop box
            cropBoxResizable: true, // Allow resizing crop box
            toggleDragModeOnDblclick: false,
            ready: function () {
              // cropper.setCropBoxData(cropBoxData).setCanvasData(canvasData); // This might cause issues if data is undefined
            },
          });
        })
        .on("hidden.bs.modal", function () {
          if (cropper) {
            // cropBoxData = cropper.getCropBoxData();
            // canvasData = cropper.getCanvasData();
            cropper.destroy();
            cropper = null; // Clean up
          }
        });
    });
  </script>
</body>
</html>